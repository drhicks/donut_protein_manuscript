<ROSETTASCRIPTS>
    <SCOREFXNS>
    </SCOREFXNS>
    <RESIDUE_SELECTORS>
    </RESIDUE_SELECTORS>
    <TASKOPERATIONS>
    </TASKOPERATIONS>
    <FILTERS>
        <Geometry name="geometry" omega="150" cart_bonded="30" start="1" end="9999" count_bad_residues="false" confidence="1"/> # sometimes loop closure uses fragments with cis bonds
    </FILTERS>
    <MOVERS>
        <NearNativeLoopCloser name="close1" closure_type="lookback" loopLengthRange="2,4" RMSthreshold="0.4" resAdjustmentRangeSide1="-3,3" resAdjustmentRangeSide2="-3,3" resBeforeLoop="%%loop1%%" resAfterLoop="%%loop2%%"  ideal="false" output_all="true"/>
        <Idealize name="idealize" atom_pair_constraint_weight="0.005" coordinate_constraint_weight="0.01" fast="false" report_CA_rmsd="true" impose_constraints="true" constraints_only="false"/> # sometimes loop closure creates cart problems
	<RepeatPropagationMover name="propagate" first_template_res="1" last_template_res="9999" start_pose_length="%%length%%" numb_repeats="4" repeat_without_replacing_pose="false"/>
        RepeatPropagationMover name="propagate" numb_repeats="4" first_template_res="1" last_template_res="%%length%%"/>
    </MOVERS>
    <PROTOCOLS>
        <Add mover="close1"/>
	Add mover="idealize"/>
        <Add mover="propagate"/>
	<Add filter="geometry"/>
    </PROTOCOLS>
</ROSETTASCRIPTS>
